{
  "version": 1,
  "hooks": {
    "sessionStart": [
      {
        "type": "command",
        "bash": "# Inline session-start-context.sh for Copilot: Detect .NET project. set -uo pipefail; SLN_COUNT=\"$(find . -maxdepth 3 \\( -name '*.sln' -o -name '*.slnx' \\) 2>/dev/null | wc -l | tr -d ' ')\" || SLN_COUNT=0; CSPROJ_COUNT=\"$(find . -maxdepth 3 -name '*.csproj' 2>/dev/null | wc -l | tr -d ' ')\" || CSPROJ_COUNT=0; HAS_GLOBAL_JSON=false; [ -f \"global.json\" ] && HAS_GLOBAL_JSON=true; TFM=\"\"; FIRST_CSPROJ=\"$(find . -maxdepth 3 -name '*.csproj' -print -quit 2>/dev/null)\" || true; [ -n \"$FIRST_CSPROJ\" ] && TFM=\"$(sed -n 's/.*<TargetFramework[s]\\{0,1\\}>\\([^<;]*\\).*/\\1/p' \"$FIRST_CSPROJ\" 2>/dev/null | head -1)\" || true; CONTEXT=\"\"; if [ \"$SLN_COUNT\" -gt 0 ] || [ \"$CSPROJ_COUNT\" -gt 0 ] || [ \"$HAS_GLOBAL_JSON\" = true ]; then CONTEXT=\"Mandatory first action for every task: invoke [skill:dotnet-advisor]. Do not plan, reason, design, or implement until it has been invoked, then follow its routing to load additional skills and apply their standards.\"; PROJECT_CONTEXT=\"This is a .NET project\"; [ -n \"$TFM\" ] && PROJECT_CONTEXT=\"This is a .NET project ($TFM)\"; [ \"$CSPROJ_COUNT\" -gt 0 ] && PROJECT_CONTEXT=\"$PROJECT_CONTEXT with $CSPROJ_COUNT project(s)\"; [ \"$SLN_COUNT\" -gt 0 ] && PROJECT_CONTEXT=\"$PROJECT_CONTEXT in $SLN_COUNT solution(s)\"; PROJECT_CONTEXT=\"$PROJECT_CONTEXT.\"; CONTEXT=\"$CONTEXT $PROJECT_CONTEXT\"; fi; if command -v jq >/dev/null 2>&1; then jq -Rn --arg additionalContext \"$CONTEXT\" '{additionalContext: $additionalContext}'; else ESCAPED_CONTEXT=\"$(printf '%s' \"$CONTEXT\" | sed 's/\\\\/\\\\\\\\/g; s/\"/\\\\\"/g; s/\\r/\\\\r/g; s/\\t/\\\\t/g')\"; printf '{\"additionalContext\":\"%s\"}\\n' \"$ESCAPED_CONTEXT\"; fi; exit 0",
        "timeoutSec": 10
      }
    ]
  }
}
